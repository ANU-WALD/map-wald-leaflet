{"version":3,"file":"map-wald-leaflet.umd.js","sources":["ng://map-wald-leaflet/leaflet.service.ts","ng://map-wald-leaflet/leaflet-map.component.ts","ng://map-wald-leaflet/draw.component.ts","ng://map-wald-leaflet/geojson-layer.component.ts","ng://map-wald-leaflet/legend.component.ts","ng://map-wald-leaflet/map-control.component.ts","ng://map-wald-leaflet/one-time-splash.component.ts","ng://map-wald-leaflet/vector-tile-layer.component.ts","ng://map-wald-leaflet/wms-layer.component.ts","ng://map-wald-leaflet/date-element.component.ts","ng://map-wald-leaflet/date-selection.component.ts","ng://map-wald-leaflet/map-coordinates.component.ts","ng://map-wald-leaflet/data/index.ts","ng://map-wald-leaflet/index.ts","ng://map-wald-leaflet/map-wald-leaflet.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport * as leaflet from 'leaflet';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class LeafletService {\n  map: Promise<leaflet.Map>;\n  private resolve: ((x: leaflet.Map)=>void);\n  private reject: ((x: any)=>void);\n\n  constructor() {\n    this.map = new Promise<leaflet.Map>((res,rej)=>{\n      this.resolve = res;\n      this.reject = rej;\n    });\n  }\n\n\n  mapCreated(map: leaflet.Map): void {\n    addControlPlaceholders(map);\n    this.resolve(map);\n  }\n\n  withMap(fn:((m:L.Map)=>void)): void {\n    this.map.then(fn);\n  }\n}\n\nfunction addControlPlaceholders(map: any) {\n  var corners = map._controlCorners,\n      l = 'leaflet-',\n      container = map._controlContainer;\n\n  function createCorner(vSide:string, hSide:string) {\n      var className = l + vSide + ' ' + l + hSide;\n\n      corners[vSide + hSide] = leaflet.DomUtil.create('div', className, container);\n  }\n\n  createCorner('middle', 'left');\n  createCorner('middle', 'right');\n  createCorner('top', 'center');\n  createCorner('bottom', 'center');\n}\n\nexport function ensurePane(map:any, pane:string, zIndex:number): void {\n  if (!map.getPane(pane)) {\n    map.createPane(pane);\n    map.getPane(pane).style.zIndex = 405 + zIndex;\n  }\n}","import { Component, OnInit, OnChanges, SimpleChanges, ElementRef, Input, Output, EventEmitter } from '@angular/core';\nimport * as leaflet from 'leaflet';\nimport { LeafletService } from './leaflet.service';\nimport { Bounds } from 'map-wald';\nimport { BasemapDescriptor } from './data';\n\nconst DEFAULT_BASE_MAP='https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n@Component({\n  selector: 'leaflet-map',\n  template: `<div class=\"leafletHost\" [style]=\"styles\">\n  <ng-content></ng-content>\n</div>\n`,styles: [\n  `\n  .leafletHost{\n    width:100%;\n    min-height:400px;\n  }`\n]\n})\nexport class LeafletMapComponent implements OnInit, OnChanges {\n  @Input() bounds: Bounds;\n  @Input() maxBounds: Bounds;\n  @Input() baseMap: BasemapDescriptor;\n  @Input() zoomControl = true;\n  @Input() minZoom = 5;\n  @Input() maxZoom = 32;\n  @Input() pointSelection = false;\n  @Output() pointSelected = new EventEmitter<leaflet.LatLng>();\n\n  map: leaflet.Map;\n  styles: any = {};\n  initialised = false;\n\n  // Leaflet.TileLayer\n  private baseLayer: leaflet.TileLayer;\n\n  constructor(private element: ElementRef, private svc: LeafletService) {\n    console.log('LeafletMapComponent');\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if(!this.initialised){\n      return;\n    }\n\n    const changeCount = Object.keys(changes).length;\n\n    // if(this.creating){\n    //   return;\n    // }\n\n    // if(this.map){\n    //   if(changes.markers){\n    //     this.setupMarkers();\n\n    //     if(changeCount===1){\n    //       return;\n    //     }\n    //   }\n    //   this.map.remove();\n    // }\n\n//    if(!this.creating){\n    this.updateMap(changes);\n//    }\n\n    if(changes.bounds){\n      this.setBounds();\n    }\n  }\n\n  ngOnInit(): void {\n    this.updateMap();\n    this.setBounds();\n  }\n\n  updateMap(changes?: SimpleChanges): void {\n    setTimeout(()=>{\n      if(!this.map){\n        this.createMap();\n        return;\n      }\n\n      if(changes&&changes.baseMap){\n        // this.baseLayer.setUrl(this.baseMap.urlTemplate || DEFAULT_BASE_MAP)\n        if(this.baseLayer){\n          this.baseLayer.setUrl(this.baseMap.urlTemplate || DEFAULT_BASE_MAP);\n          // this.baseLayer.removeFrom(this.map);\n        } else if(this.baseMap) {\n          this.createBaseLayer();\n          this.baseLayer.addTo(this.map).bringToBack();\n        }\n      }\n    });\n\n    // Update parameters\n  }\n\n  createBaseLayer(): void {\n    this.baseLayer = null;\n    if(!this.baseMap){\n      return;\n    }\n\n    const options: leaflet.TileLayerOptions = {};\n    if(this.baseMap.maxNativeZoom){\n      options.maxNativeZoom = this.baseMap.maxNativeZoom;\n    }\n\n    this.baseLayer = leaflet.tileLayer(this.baseMap.urlTemplate || DEFAULT_BASE_MAP,options);\n  }\n\n  createMap(): void {\n    setTimeout(()=>{\n      if(this.map){\n        this.map.remove();\n        this.map = null;\n      }\n\n      const theDiv = this.element.nativeElement as HTMLElement;\n      const theHost = theDiv.querySelector('.leafletHost');\n\n      // let baseLayers = R.mapObjIndexed(v=>{\n      //   return L.tileLayer(v,\n      //     { maxZoom: 18, attribution: '...' });\n      // },this.baseMaps);\n\n      // if(!this.baseMap || !baseLayers[this.baseMap]){\n      //   this.baseMap = Object.keys(this.baseMaps)[0];\n      // }\n\n      // let baseLayerArray = [baseLayers[this.baseMap]];\n      let crs = leaflet.CRS.EPSG3857;//:L.CRS.Simple;\n      // if(this.crs){\n      //   crs = L.CRS[this.crs];\n      // }\n\n      // let panes = 0;\n      // if(this.map){\n      //   panes = getCustomMapPanes(this.map).length;\n      // }\n      this.createBaseLayer();\n      const baseLayerArray = [\n      ];\n      if(this.baseLayer){\n        baseLayerArray.push(this.baseLayer);\n      }\n\n      this.map = leaflet.map(theHost as HTMLElement,{\n        crs,\n        zoom: 5,\n        maxBounds: toBounds(this.maxBounds),\n        minZoom: this.minZoom,\n        maxZoom: this.maxZoom,\n        zoomControl: this.zoomControl,\n        center: leaflet.latLng(-20, 135),\n        // zoom: this.zoom,\n        // minZoom: this.minZoom,\n        // maxZoom: this.maxZoom,\n        scrollWheelZoom: true,\n        layers:baseLayerArray,\n        continuousWorld: false,\n        noWrap: true,\n        tap: false,\n        // worldCopyJump:true\n            // attributionControl: this.attribution\n      } as leaflet.MapOptions);\n      this.svc.mapCreated(this.map);\n      // if(!this.pannable){\n      //   this.map.dragging.disable();\n      // }\n\n      // if(!this.zoomable){\n      //   this.map.touchZoom.disable();\n      //   this.map.doubleClickZoom.disable();\n      //   this.map.scrollWheelZoom.disable();\n      // }\n\n      // configureVectorPanes(panes,this.map);\n\n      // this._helper.register(this.map);\n      this.map.on('click',(evt: leaflet.LeafletMouseEvent)=>{\n        if(!this.pointSelection || evt.originalEvent.defaultPrevented){\n          return;\n        }\n\n        this.pointSelected.emit(evt.latlng);\n      });\n      // this.creating=false;\n\n      // this.map.on('zoomend',()=>this.coordinatesChanged());\n      // this.map.on('moveend',()=>this.coordinatesChanged());\n\n      // if(this.showLayerControl){\n      //   this.layerControl = L.control.layers(baseLayers, [],{\n      //     hideSingleBase:true\n      //   }).addTo(this.map);\n      // }\n\n      // this.mapCreated.emit(this.map);\n\n\n\n      // this.markerLayers = [];\n      // this.setupMarkers();\n\n      this.setBounds();\n      this.initialised = true;\n    });\n\n  }\n\n  setBounds(): void {\n    if(!this.map||!this.bounds){\n      return;\n    }\n\n    this.map.fitBounds(toBounds(this.bounds));\n  }\n\n}\n/*\nhttp://35.244.111.168:8080/wms\n?service=WMS\n&request=GetMap\n&layers=wcf\n&styles=\n&format=image%2Fpng\n&transparent=true\n&version=1.1.1\n&time=2019-01-01T00%3A00%3A00.000Z\n&width=256\n&height=256\n&srs=EPSG%3A3857\n&bbox=-17532819.79994059,-5009377.085697311,-15028131.257091936,-2504688.542848655\n\n*/\n\nfunction toBounds(bounds:Bounds):L.LatLngBoundsLiteral{\n  if(!bounds){\n    return null;\n  }\n\n  return [\n    [bounds.south,bounds.west],\n    [bounds.north,bounds.east]\n  ];\n}","import { Component, OnInit, Output, EventEmitter, OnDestroy, Input } from '@angular/core';\nimport * as L from 'leaflet';\nimport 'leaflet-draw';\nimport { ensurePane, LeafletService } from './leaflet.service';\n\n@Component({\n  selector: 'draw',\n  template: '',\n  styles: []\n})\nexport class DrawComponent implements OnInit, OnDestroy {\n  // @Input() zIndex = 2000;\n  @Output() featureClosed = new EventEmitter<any>();\n\n  private drawnItems: L.FeatureGroup;\n  private drawControl: L.Control.Draw;\n  private polygon: L.Draw.Polygon;\n\n  constructor(private map: LeafletService) { }\n\n  keyHandler = (event: L.LeafletKeyboardEvent) => {\n    const key = event.originalEvent.key;\n    if (key === 'Escape') {\n      this.drawnItems.clearLayers();\n      this.polygon.removeHooks();\n      this.map.withMap(m=>this.initiateDrawing(m));\n    } else if((key === 'Delete')||(key === 'Backspace') ){\n      this.polygon.deleteLastVertex();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.map.withMap(m=>this.removeControl(m))\n  }\n\n  ngOnInit(): void {\n    this.map.withMap(m=>this.addControl(m))\n  }\n\n  removeControl(m: L.Map): void {\n    m.removeLayer(this.drawnItems);\n    this.polygon.removeHooks();\n    // m.removeControl(this.drawControl);\n    m.off(L.Draw.Event.DRAWSTART);\n    m.off(L.Draw.Event.CREATED);\n    m.off('keyup',this.keyHandler);\n  }\n\n  addControl(m: L.Map): void {\n    this.drawnItems = new L.FeatureGroup();\n    m.addLayer(this.drawnItems);\n\n    // this.drawControl = new L.Control.Draw({\n    //   draw: {\n    //     polyline: false,\n    //     circle: false,\n    //     marker: false,\n    //     rectangle: false,\n    //     circlemarker: false\n    //   },\n    //   edit: null\n    // });\n    // m.addControl(this.drawControl);\n    this.initiateDrawing(m);\n\n    m.on(L.Draw.Event.DRAWSTART, (event) => {\n      this.drawnItems.clearLayers();\n    });\n\n    m.on(L.Draw.Event.DRAWVERTEX, (event) => {\n      this.drawnItems.clearLayers();\n    });\n\n    m.on(L.Draw.Event.CREATED, (event) => {\n      console.log(event);\n\n      const layer = event.layer;\n      this.drawnItems.clearLayers();\n      this.drawnItems.addLayer(layer);\n      this.featureClosed.emit(layer.toGeoJSON());\n      this.polygon.removeHooks();\n      this.initiateDrawing(m);\n    });\n\n    m.on('keyup',this.keyHandler);\n  }\n\n  initiateDrawing(m: L.Map): void {\n    // const pane = `drawn-polygon-${this.zIndex}`;\n    // ensurePane(m,pane,this.zIndex);\n    (L.Draw.Polygon.prototype as any)._onTouch = L.Util.falseFn;\n    // const options = {zIndexOffset:this.zIndex,repeatMode: false};\n    this.polygon = new L.Draw.Polygon(m as L.DrawMap, {repeatMode: false});\n    this.polygon.addHooks();\n  }\n}\n\n\n","import { Component, OnInit, Input, OnChanges, SimpleChanges, Output, EventEmitter, OnDestroy } from '@angular/core';\nimport * as L from 'leaflet';\nimport 'leaflet.vectorgrid';\nimport { LeafletService, ensurePane } from './leaflet.service';\nimport { TiledSublayerDescriptor } from './data';\nimport { HttpClient } from '@angular/common/http';\nimport { ScaledStyle, StyleValue } from 'map-wald';\nimport { Feature } from 'geojson';\n\nconst STYLES = {\n  fillOpacity: 0.0,\n  weight: 1.0\n};\n\nexport enum PointMode {\n  default,\n  circle\n}\n\n@Component({\n  selector: 'geojson-layer',\n  template: '',\n  styles: ['']\n})\nexport class GeojsonLayerComponent implements OnInit, OnChanges, OnDestroy {\n  @Input() url: string;\n  @Input() features: any;\n  // @Input() styles: any;\n  @Input() sublayers: TiledSublayerDescriptor[] = [];\n  @Input() pointMode:PointMode = PointMode.default;\n  @Input() style: {[key:string]:StyleValue} = {};\n  // @Input() idColumn = 'id';\n  @Output() featureSelected = new EventEmitter<any>();\n  @Input() zIndex = 100;\n\n  private destroyed = false;\n  private selectedFeature: any;\n  private vectorLayer: L.GeoJSON;\n  // private data: any;\n\n  constructor(private http: HttpClient, private map: LeafletService) {\n  }\n\n  ngOnInit(): void {\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed = true;\n    this.map.map.then(m => {\n      this.remove(m);\n    });\n  }\n\n  private remove(m: L.Map): void {\n    if (this.vectorLayer) {\n      this.vectorLayer.removeFrom(m);\n      this.vectorLayer = null;\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.url) {\n      this.downloadLayer(changes.url.currentValue);\n    } else if(changes.features||changes.pointMode){\n      this.makeLayer();\n    }\n  }\n\n  downloadLayer(url:string): void {\n    this.http.get(this.url).subscribe((data: any) => {\n      if (url !== this.url) {\n        // out of date!\n        return;\n      }\n      this.features = data;\n\n      this.makeLayer();\n    });\n  }\n\n  makeLayer(): void {\n    this.map.map.then(m => {\n      this.remove(m);\n      if (this.destroyed) {\n        return;\n      }\n\n      const style = (f: any)=>{\n        const styles: {[key:string]:any} = Object.assign({},STYLES);\n        Object.keys(this.style).forEach(k=>{\n          const val = this.style[k];\n          if((val as ScaledStyle<any>).getStyleValue) {\n            styles[k] = (val as ScaledStyle<any>).getStyleValue(f);\n          } else {\n            styles[k] = val;\n          }\n        });\n        return styles;\n      };\n\n      const options:L.GeoJSONOptions = {\n        // interactive: true\n        style: style\n      };\n\n      if(this.pointMode===PointMode.circle){\n        options.pointToLayer = (feature, latlng) => {\n          let radius = 3;\n          if(this.style && this.style.radius) {\n            if((this.style.radius as ScaledStyle<number>).getStyleValue){\n              radius = (this.style.radius as ScaledStyle<number>).getStyleValue(feature);\n            } else {\n              radius = this.style.radius as number;\n            }\n          }\n          return L.circleMarker(latlng,{radius:radius});\n        };\n      }\n\n      const pane = `vector-pane-${this.zIndex}`;\n      ensurePane(m,pane,this.zIndex)\n      options.pane = pane;\n      this.vectorLayer = L.geoJSON(this.features, options);\n\n      this.vectorLayer.on('click' as any, (event) => {\n        if (this.selectedFeature) {\n          this.vectorLayer.resetStyle(this.selectedFeature);\n          // resetFeatureStyle(this.selectedFeature);\n        }\n        this.selectedFeature = event.layer;\n        this.selectedFeature.setStyle({\n          weight:5\n        });\n\n        this.featureSelected.emit(this.selectedFeature.feature);\n      });\n      this.vectorLayer.addTo(m);\n    });\n  }\n}\n","import { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n  selector: 'legend',\n  template: `<div class=\"map-legend panel panel-group\">\n<ng-template #tooltipContent>\n  <span [innerHtml]=helpText></span>\n</ng-template>\n  <strong>{{title}} <span *ngIf=\"mapUnits\" [innerHTML]=\"'('+mapUnits+')'\"></span>\n        <span *ngIf=\"helpText\"\n              [ngbTooltip]=\"tooltipContent\"\n              [placement]=\"tooltipPlacement\"\n              container=\"body\">\n          <i class=\"fa fa-info-circle\"></i>\n        </span>\n  </strong>\n\n  <div *ngIf=\"!imageURL\">\n    <div style=\"display:table;line-height:15px\">\n      <div style=\"display:table-row;padding:0;\"\n          *ngFor=\"let colour of colours; let i=index\">\n        <div class=\"legend-colour\" [ngClass]=\"markerClasses[i]||markerClasses[0]||''\">\n          <i class=\"legend-entry\" [ngStyle]=\"{background:colour}\"></i>\n        </div>\n        <div class=\"legend-label\">\n          <span [innerHTML]=\"labels[i]\"></span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div *ngIf=\"imageURL\">\n    <img [src]=\"imageURL\">\n  </div>\n  <p *ngIf=\"attributionLink\">Source: <a [href]=\"attributionLink\">{{attribution || 'details'}}</a></p>\n  <p *ngIf=\"attribution&&!attributionLink\">Source: {{attribution}}</p>\n</div>\n`, styles: [`\n.map-legend{\n  display:block;\n  background: white;\n}\n\n.legend-colour{\n  display:table-cell;\n  padding:0px;\n}\n\n.legend-label{\n  display:table-cell;\n  padding:0px 4px 2px 2px;\n  font-size:10px;\n  vertical-align:middle;\n}\n\n.legend-entry {\n  float: left;\n  width: 15px !important;\n  height: 15px !important;\n}\n\n.legend-colour.circle i.legend-entry {\n  border-radius:7px;\n}\n`]\n})\nexport class LegendComponent implements OnInit {\n  @Input() colours: Array<string> = ['red', 'white', 'blue'];\n  @Input() labels: Array<string> = [];\n  @Input() markerClasses: string[] = [];\n  @Input() imageURL: string\n  @Input() title = 'the title';\n  @Input() mapUnits = '';\n  @Input() helpText: string;\n  @Input() tooltipPlacement = 'right';\n  @Input() attribution: string;\n  @Input() attributionLink: string;\n\n  generatedLabels: string[] = [];\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n\nexport function makeColour(r: number, g: number, b: number, a?: number): string {\n  a = (a === undefined) ? 1 : a;\n  return `rgb(${r},${g},${b},${a})`;\n}\n\n","/// <reference types=\"./leaflet.customcontrols\" />\n\nimport { Component, OnInit, ViewChild, Input, AfterViewInit, ElementRef } from '@angular/core';\nimport { LeafletService } from './leaflet.service';\nimport * as leaflet from 'leaflet';\n\ninterface SavedMapSettings {\n  pan: boolean;\n  zoom: boolean;\n}\n\nconst TAG_WHITE_LIST = ['INPUT', 'SELECT', 'OPTION'];\n\ninterface MapWithHandler{\n  _handlers: {\n    enable: ()=>void;\n    disable: ()=>void;\n  }[];\n}\n\n@Component({\n  selector: 'map-control',\n  template: `<div #mapControl class=\"map-control-content\"\n                  (touchstart)=\"ontouchstart($event)\"\n                  (mouseenter)=\"disableMapEvents($event)\"\n                  (mouseleave)=\"enableMapEvents($event)\"\n                  (click)=\"m($event)\"\n                  (dblclick)=\"m($event)\"\n                  (mousemove)=\"m($event)\"\n                  (mousedown)=\"m($event)\"\n                  (mouseup)=\"m($event)\">\n  <ng-content></ng-content>\n</div>\n`, styles: [`.map-control-content{\n  background: transparent;\n}\n`],\n})\nexport class MapControlComponent implements OnInit, AfterViewInit {\n  @ViewChild('mapControl', { static: false }) mapControl: Component;\n  @Input() position = 'TOP_RIGHT';\n  touchDevice = false;\n\n  constructor(private _el: ElementRef, private _map: LeafletService) { }\n\n  ngOnInit(): void {\n  }\n\n  ngAfterViewInit(): void {\n    // this._wrapper.getNativeMap().then((m)=>{\n    let content: HTMLElement = this._el.nativeElement.querySelector('.map-control-content');\n\n    //   // If content of the map control is not already wrapped in a div, do it\n    //   // now.\n    if (content.nodeName !== \"DIV\") {\n      const controlDiv: HTMLElement = document.createElement('div');\n      controlDiv.appendChild(content);\n      content = controlDiv;\n    }\n\n    const CustomControl = leaflet.Control.extend({\n      onAdd: (map:leaflet.Map) => {\n        return content;\n      },\n\n      onRemove: (map:leaflet.Map) => {\n        // Nothing to do here\n      }\n    });\n\n    const makeCustomControl = (opts:any) => {\n      return new CustomControl(opts);\n    };\n\n    this._map.map.then(map => {\n      const c = makeCustomControl({\n        position: this.position.replace(/_/g,'').toLowerCase()\n      });\n      c.addTo(map);\n    });\n    //   (<any>m).controls[(<any>window).google.maps.ControlPosition[this.position]].push(content);\n    // });\n  }\n\n  ontouchstart(ev: TouchEvent): void {\n    this.touchDevice = true;\n    if(TAG_WHITE_LIST.indexOf((ev.target as any).tagName)>=0){\n      ev.stopPropagation();\n    }\n    this.enableMapEvents(null);\n  }\n\n  disableMapEvents(event:MouseEvent): void {\n    this.m(event);\n\n    if(this.touchDevice){\n      return;\n    }\n\n    this._map.map.then(m=>{\n      m.dragging.disable();\n      m.scrollWheelZoom.disable();\n\n      (m as any as MapWithHandler)._handlers.forEach(h=>h.disable());\n    });\n  }\n\n  enableMapEvents(event:MouseEvent): void {\n    if(event){\n      this.m(event);\n    }\n\n    this._map.map.then(m=>{\n      const options = {\n        pan:true,\n        zoom:true\n      };\n\n      if(options.pan){\n        m.dragging.enable();\n      }\n\n      if(options.zoom){\n        m.scrollWheelZoom.enable();\n      }\n\n      (m as any as MapWithHandler)._handlers.forEach(h=>h.enable());\n    });\n  }\n\n  m(event:MouseEvent){\n    event.stopPropagation();\n  }\n\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef, EventEmitter, Output } from '@angular/core';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport * as store from 'store';\n\nexport enum SplashCloseMode {\n  NotOpened,\n  Accepted,\n  Cancelled\n}\n\n@Component({\n  selector: 'one-time-splash',\n  template: `<ng-template #splashTemplate let-c=\"close\" let-d=\"dismiss\">\n  <div *ngIf=\"label\" class=\"modal-header\">\n    <h4 class=\"modal-title\">\n      {{label}}</h4>\n    <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"d('Cross click')\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <ng-content></ng-content>\n  </div>\n  <div class=\"modal-footer\">\n    <label *ngIf=\"application\">\n      <input type=\"checkbox\" [(ngModel)]=\"doNotShow\" (ngModelChange)=\"doNotShowClicked()\">\n      &nbsp; {{hideMessage}}\n    </label>\n    <button autofocus type=\"button\" class=\"btn btn-secondary\" (click)=\"c('Close click')\">Close</button>\n  </div>\n  </ng-template>\n`,\n  styles: [``]\n})\nexport class OneTimeSplashComponent implements AfterViewInit  {\n  @ViewChild('splashTemplate',{static:false}) splashTemplate:any;\n  @Input() application:string;\n  @Input() label = 'About';\n  @Input() hideMessage = 'Understood, I donâ€™t need to see this again';\n  @Input() klass: string;\n  @Input() showOnLaunch = true;\n  @Output() closed = new EventEmitter<SplashCloseMode>();\n  doNotShow: boolean;\n  current:NgbModalRef;\n\n  constructor(private modalService: NgbModal){\n\n  }\n\n  storageKey(): string {\n    if(!this.application){\n      return null;\n    }\n\n    return this.application  + '-splash-skip';\n  }\n\n  ngAfterViewInit(): void {\n    setTimeout(()=>{\n      const key = this.storageKey();\n      if(key){\n        this.doNotShow = store.get(key,false);\n      }\n\n      if(this.showOnLaunch){\n        this.defaultShow();\n      }\n    });\n  }\n\n  defaultShow(): void {\n    if(!this.doNotShow){\n      this.show();\n    } else {\n      this.closed.emit(SplashCloseMode.NotOpened);\n    }\n  }\n\n  show(): void {\n    this.current = this.modalService.open(this.splashTemplate,{\n      size:'lg',\n      windowClass:this.klass\n    });\n  }\n\n  close(): void {\n    if(!this.current){\n      this.closed.emit(SplashCloseMode.NotOpened);\n      return;\n    }\n\n    this.current.close();\n    this.current=null;\n    this.closed.emit(SplashCloseMode.Accepted);\n  }\n\n  doNotShowClicked(): void {\n    const key = this.storageKey();\n    if(!key){\n      return;\n    }\n\n    store.set(key,this.doNotShow);\n  }\n}\n","/// <reference types=\"./leaflet.vectorgrid\" />\n\nimport { Component, OnInit, Input, OnChanges, SimpleChanges, Output, EventEmitter, OnDestroy } from '@angular/core';\nimport * as leaflet from 'leaflet';\n// import 'leaflet.vectorgrid';\nimport { ensurePane, LeafletService } from './leaflet.service';\nimport { TiledSublayerDescriptor } from './data';\n\n@Component({\n  selector: 'vector-tile-layer',\n  template: '',\n  styles: []\n})\nexport class VectorTileLayerComponent implements OnInit, OnChanges, OnDestroy {\n  @Input() url: string;\n  @Input() styles: any;\n  @Input() sublayers: TiledSublayerDescriptor[] = [];\n  @Output() featureSelected = new EventEmitter<any>();\n  @Input() minZoom = 0;\n  @Input() maxZoom = 30;\n  @Input() minNativeZoom = 11;\n  @Input() maxNativeZoom = 13;\n  @Input() zIndex = 100;\n\n  private destroyed = false;\n  private selectedFeature: any;\n  private vectorLayer: L.VectorGridLayer;\n\n  constructor(private map: LeafletService) { }\n\n  ngOnInit(): void {\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed = true;\n    this.map.map.then(m=>{\n      this.remove(m);\n    });\n  }\n\n  private getFeatureId(f:any): string {\n    const match = this.sublayers.find(v=>f.properties[v.keyField]);\n    return f.properties[match.keyField];\n  }\n\n  private remove(m: L.Map): void {\n    if(this.vectorLayer){\n      this.vectorLayer.removeFrom(m);\n      this.vectorLayer = null;\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    this.map.map.then(m=>{\n      this.remove(m);\n      if(this.destroyed){\n        return;\n      }\n\n      const pane = `vector-pane-${this.zIndex}`;\n      ensurePane(m,pane,this.zIndex)\n\n      this.vectorLayer = L.vectorGrid.protobuf(this.url,{\n        pane,\n        minZoom:this.minZoom,\n        maxZoom:this.maxZoom,\n        minNativeZoom:this.minNativeZoom,\n        maxNativeZoom:this.maxNativeZoom,\n        interactive: true,\n        vectorTileLayerStyles: this.styles,\n        getFeatureId: (f:any) => this.getFeatureId(f)\n      });\n\n      this.vectorLayer.on('click' as any,(event)=>{\n        if(this.selectedFeature){\n          this.vectorLayer.resetFeatureStyle(this.selectedFeature);\n        }\n        this.selectedFeature = this.getFeatureId(event.layer);\n        this.vectorLayer.setFeatureStyle(this.selectedFeature, {\n          weight:5\n        });\n\n        const geoJSON = this.vectorGridFeatureToGeoJSON(event.layer);\n        this.featureSelected.emit(geoJSON);\n      });\n      this.vectorLayer.addTo(m);\n    });\n  }\n\n  vectorGridFeatureToGeoJSON(lyr:any):any{\n    const parts:any[][] = (lyr._parts[0]&&lyr._parts[0][0])?lyr._parts:[lyr._parts];\n    const points = (parts as any[]).map((part:any[])=>{\n      return part.map(pt=>([pt.x,pt.y] as number[]));\n    });\n    const originalXs = ([] as number[]).concat(...points.map(part=>part.map(pt=>pt[0])));\n    const minx = Math.min(...originalXs);//points[0].map(pt=>pt[0]));\n    const maxx = Math.max(...originalXs);//points[0].map(pt=>pt[0]));\n\n    const originalYs = ([] as number[]).concat(...points.map(part=>part.map(pt=>pt[1])));\n    const miny = Math.min(...originalYs);//points[0].map(pt=>pt[1]));\n    const maxy = Math.max(...originalYs);//points[0].map(pt=>pt[1]));\n\n    function converter(from:number[],to:number[]): ((c:number)=>number) {\n      const fromDelta = from[1]-from[0];\n      const toDelta = to[1] - to[0];\n      return (c)=>to[0] + ((c-from[0])/fromDelta) * toDelta;\n    }\n\n    const xConverter = converter([minx,maxx],[lyr.properties.minx,lyr.properties.maxx]);\n    const yConverter = converter([miny,maxy],[lyr.properties.maxy,lyr.properties.miny]);\n\n    return {\n      type:'Feature',\n      geometry:{\n        type:'Polygon',\n        coordinates:points.map(part=>part.map(pt=>[xConverter(pt[0]),yConverter(pt[1])]))\n      },\n      properties:lyr.properties\n    };\n  }\n\n}\n","import { Component, OnInit, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { ensurePane, LeafletService } from './leaflet.service';\nimport * as L from 'leaflet';\n\nconst DEFAULT_WMS_PARAMS = {\n  format: 'image/png',\n  transparent: true\n};\n\n@Component({\n  selector: 'wms-layer',\n  template: '',\n  styles: []\n})\nexport class WmsLayerComponent implements OnInit, OnChanges {\n  @Input() url: string;\n  @Input() params: any = {};\n  @Input() zIndex = 10;\n  private layer: L.TileLayer;\n\n  constructor(private map: LeafletService) { }\n\n  ngOnInit(): void {\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    this.map.map.then(m=>{\n      if(this.layer){\n        this.layer.removeFrom(m);\n        this.layer = null;\n      }\n      if(!this.url||!this.params){\n        return;\n      }\n\n      const params = Object.assign({},DEFAULT_WMS_PARAMS,this.params);\n\n      const pane = `wms-pane-${this.zIndex}`;\n      ensurePane(m,pane,this.zIndex)\n      params.pane = pane;\n\n      this.layer = L.tileLayer.wms(this.url,params as L.WMSOptions);\n      // this.layer.options.noWrap = true;\n      this.layer.addTo(m);\n    });\n  }\n\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef, Output, EventEmitter } from '@angular/core';\n\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'date-element',\n  template: `<div class=\"row no-gutters\">\n  <div class=\"col-4\">{{label}}</div>\n  <div class=\"col-2\">\n    <button class=\"btn btn-secondary btn-sm\"\n            (click)=\"move(-step)\"\n            [disabled]=\"disabled\">\n      <i class=\"fa fa-angle-left\"></i>\n    </button>\n  </div>\n  <div class=\"col-4\"><button class=\"btn btn-link btn-sm\">{{src[property]}}</button></div>\n  <div class=\"col-2\">\n    <button class=\"btn btn-secondary btn-sm\"\n            (click)=\"move(step)\"\n            [disabled]=\"disabled\">\n      <i class=\"fa fa-angle-right\"></i>\n    </button>\n  </div>\n</div>\n`,styles: []})\nexport class DateElementComponent implements AfterViewInit  {\n  @Input() label:string;\n  @Input() property:string;\n  @Input() src:any;\n  @Input() step = 1;\n  @Output() changed = new EventEmitter<any>();\n  @Input() disabled = false;\n\n  constructor(){\n\n  }\n\n  ngAfterViewInit(){\n\n  }\n\n  move(n:number){\n    this.src[this.property] += n;\n    this.changed.emit(this.src);\n  }\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef, Output, EventEmitter } from '@angular/core';\nimport { NgbDateStruct } from '@ng-bootstrap/ng-bootstrap';\nimport { TimeUtilsService, InterpolationService } from 'map-wald';\n\nconst MILLISECONDS_PER_DAY=24*60*60*1000;\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'date-selection',\n  template: `<div class=\"date-control container-fluid\">\n  <div *ngIf=\"style!=='arrows'\" class=\"row no-gutters\">\n    <div class=\"col-12 form-group-inline\">\n        <div class=\"input-group input-group-sm\">\n          <div *ngIf=\"step\" class=\"ds-btn input-group-addon\" (click)=\"move(-stepDays)\">\n            <i class=\"fa fa-angle-left\"></i>\n          </div>\n          <input class=\"form-control form-control-sm\"\n                 placeholder=\"yyyy-mm-dd\"\n                 name=\"dp\"\n                 [(ngModel)]=\"dateStruct\"\n                 (ngModelChange)=\"dateStructChanged()\"\n                 ngbDatepicker\n                 #d=\"ngbDatepicker\"\n                 [maxDate]=\"maxDateStruct\"\n                 [minDate]=\"minDateStruct\"\n                 [disabled]=\"disabled\">\n          <div class=\"ds-btn input-group-addon\" (click)=\"disabled||d.toggle()\" >\n            <i class=\"fa fa-calendar\"></i>\n          </div>\n          <div *ngIf=\"step\" class=\"ds-btn input-group-addon\" (click)=\"move(stepDays)\">\n            <i class=\"fa fa-angle-right\"></i>\n          </div>\n        </div>\n      </div>\n\n    <!--\n      <div class=\"col-2\" >\n        <button class=\"btn btn-secondary btn-sm\" [disabled]=\"atMax\"\n                (click)=\"move(1)\"><i class=\"fa fa-chevron-right\"></i></button>\n      </div>\n    -->\n  </div>\n\n  <div *ngIf=\"style==='arrows'\">\n    <date-element *ngIf=\"need.day\"   [src]=\"dateStruct\" [property]=\"'day'\" [label]=\"'Day'\"\n                  [step]=\"stepDays\"\n                  (changed)=\"dateStructChanged()\"\n                  [disabled]=\"disabled\"></date-element>\n    <date-element *ngIf=\"need.month\" [src]=\"dateStruct\" [property]=\"'month'\" [label]=\"'Month'\"\n                  (changed)=\"dateStructChanged()\"\n                  [disabled]=\"disabled\"></date-element>\n    <date-element *ngIf=\"need.year\"  [src]=\"dateStruct\" [property]=\"'year'\" [label]=\"'Year'\"\n                  (changed)=\"dateStructChanged()\"\n                  [disabled]=\"disabled\"></date-element>\n  </div>\n</div>\n`,styles: [\n  `\n  .date-control.container-fluid {\n    padding-left: 0px;\n    padding-right: 0px;\n  }\n\n  .ds-btn {\n    min-width:10px;\n    padding: 5px;\n  }\n  `\n]})\nexport class DateSelectionComponent implements AfterViewInit  {\n  @Input() date: Date;\n  @Output() dateChange = new EventEmitter();\n  @Input() timestep: string;\n  @Input() minDate: Date|string;\n  @Input() maxDate: Date|string;\n  @Input() style: ('popup'|'arrows') = 'arrows';\n  @Input() stepDays = 1;\n  @Input() referenceDate:string = null;\n  @Input() disabled = false;\n  @Input() step = false;\n\n  need = {\n    day:true,\n    month:true,\n    year:true\n  };\n\n  minDateStruct:NgbDateStruct;\n  maxDateStruct:NgbDateStruct;\n  dateStruct:NgbDateStruct;\n\n  atMax:boolean=false;\n  atMin:boolean=false;\n\n  constructor(private timeUtils: TimeUtilsService){\n\n  }\n\n  ngAfterViewInit(){\n\n  }\n\n  ngOnChanges(changes:any){\n    if(changes.minDate){\n      this.minDateStruct = this.timeUtils.convertDate(this.minDate);\n    }\n\n    if(changes.maxDate){\n      this.maxDateStruct = this.timeUtils.convertDate(this.maxDate);\n    }\n\n    if(changes.date){\n      this.dateStruct = this.timeUtils.convertDate(this.date);\n    }\n\n    if(changes.timestep){\n      this.assessDateComponents();\n    }\n    this.checkLimits();\n  }\n\n  dateStructChanged(){\n    this.date = new Date(Date.UTC(this.dateStruct.year,this.dateStruct.month-1,this.dateStruct.day));\n    // this.date.setUTCFullYear(this.dateStruct.year)\n    // this.date.setUTCMonth(this.dateStruct.month-1)\n    // this.date.setUTCDate(this.dateStruct.day);\n    this.checkReference();\n    this.dateChange.emit(this.date);\n  }\n\n  assessDateComponents(){\n    this.need.day = this.need.month = this.need.year = true;\n    if(this.timestep==='daily'){\n      return;\n    }\n    this.need.day = false;\n\n    if(this.timestep==='annual') {\n      this.need.month = false;\n    }\n  }\n\n  move(n:number){\n    this.date = new Date(this.date&&this.date.getTime());\n    this.date.setDate(this.date.getDate()+n);\n    this.onDateChanged();\n    this.dateChange.emit(this.date);\n  }\n\n  onDateChanged(){\n    this.checkLimits();\n  }\n\n  checkLimits(){\n    this.atMax = this.timeUtils.datesEqual(this.dateStruct,this.maxDateStruct);\n    this.atMin = this.timeUtils.datesEqual(this.dateStruct,this.minDateStruct);\n  }\n  // TODO not enforcing limits etc...\n\n  checkReference(): any {\n    if(!this.referenceDate){\n      return;\n    }\n\n    let refComponents = InterpolationService.interpolate(this.referenceDate,{\n      year:this.date.getFullYear(),\n      month:this.date.getMonth()+1,\n      date:this.date.getDate()\n    }).split('-').map(s=>+s);\n\n    let currentRef = new Date(Date.UTC(refComponents[0],refComponents[1]-1,refComponents[2]));\n\n    console.log('currentRef',currentRef);\n    console.log('currentDate',this.date);\n    let timeSpan = MILLISECONDS_PER_DAY * this.stepDays;\n\n    let days = (this.date.getTime() - currentRef.getTime())/timeSpan;\n    this.date = new Date(currentRef.getTime() + Math.round(days)*timeSpan);\n    this.dateStruct = this.timeUtils.convertDate(this.date);\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { LatLng, LatLngBounds, LeafletEvent, LeafletMouseEvent } from 'leaflet';\nimport { LeafletService } from './leaflet.service';\n\n@Component({\n  selector: 'map-coordinates',\n  template: `\n  <div style=\"background-color:white\">\n    <p>Cursor: {{mouseCoordinates}}</p>\n    <p>Bounds: {{bounds | json}}</p>\n</div>\n`,\n  styles: []\n})\nexport class MapCoordinatesComponent implements OnInit {\n  mouseCoordinates: LatLng;\n  bounds: LatLngBounds;\n\n  constructor(private map: LeafletService) {\n    this.withMap(m=>{\n      const events = [\n        'resize',\n        'zoomend',\n        'moveend',\n        'mousemove'\n      ]\n      events.forEach(e=>{\n        m.on(e,(evt)=>this.mapChange(evt));\n      });\n\n      // const mouseEvents = [\n      //   'mousemove'\n      // ];\n      // mouseEvents.forEach(e=>{\n      //   m.on(e,(evt)=>this.mouseEvent(evt));\n      // })\n    });\n  }\n\n  ngOnInit(): void {\n  }\n\n  withMap(fn:((m:L.Map)=>void)): void {\n    this.map.map.then(fn);\n  }\n\n  mapChange(evt:LeafletEvent): void {\n    if(evt.type==='mousemove'){\n      this.mouseCoordinates = (evt as LeafletMouseEvent).latlng;\n      return;\n    }\n\n    const map:L.Map = evt.target;\n    this.bounds = map.getBounds();\n    // console.log(evt);\n  }\n\n  // mouseEvent(evt:MouseEvent):void {\n\n  // }\n}\n","\n\nexport * from './basemap-descriptor';\nexport * from './vector-layer-descriptor';\n\n\n// export * from './display-settings';\n// export * from './layer-descriptor';\n// export * from './legend-response';\n// export * from './map-settings';\n\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { HttpClientModule } from '@angular/common/http';\nimport { CommonModule } from '@angular/common';\nimport { MapWaldCoreModule } from 'map-wald';\n\nimport { LeafletService } from './leaflet.service';\nimport { LeafletMapComponent } from './leaflet-map.component';\nimport { DrawComponent } from './draw.component';\nimport { GeojsonLayerComponent } from './geojson-layer.component';\nimport { LegendComponent } from './legend.component';\nimport { MapControlComponent } from './map-control.component';\nimport { OneTimeSplashComponent } from './one-time-splash.component';\nimport { VectorTileLayerComponent } from './vector-tile-layer.component';\nimport { WmsLayerComponent } from './wms-layer.component';\nimport { DateElementComponent } from './date-element.component';\nimport { DateSelectionComponent } from './date-selection.component';\nimport { MapCoordinatesComponent } from './map-coordinates.component';\n\nexport * from './data';\nexport * from './leaflet.service';\nexport * from './leaflet-map.component';\nexport * from './draw.component';\nexport * from './geojson-layer.component';\nexport * from './legend.component';\nexport * from './map-control.component';\nexport * from './one-time-splash.component';\nexport * from './vector-tile-layer.component';\nexport * from './wms-layer.component';\nexport * from './date-element.component';\nexport * from './date-selection.component';\nexport * from './map-coordinates.component';\n\nconst components: any[] = [\n  //$componentList\n  DrawComponent,\n  GeojsonLayerComponent,\n  LeafletMapComponent,\n  LegendComponent,\n  MapControlComponent,\n  OneTimeSplashComponent,\n  VectorTileLayerComponent,\n  WmsLayerComponent,\n  DateElementComponent,\n  DateSelectionComponent,\n  MapCoordinatesComponent\n];\n\nconst services: any[] = [\n  //$serviceList\n  LeafletService  \n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    HttpClientModule,\n    NgbModule,\n    MapWaldCoreModule\n  ],\n  declarations: components,\n  exports: components,\n  providers: services\n})\nexport class MapWaldLeafletModule {\n  static forRoot(moduleInitialisation:any): ModuleWithProviders<MapWaldLeafletModule> {\n    return {\n      ngModule: MapWaldLeafletModule,\n      providers: services\n    };\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["core_1","L","leaflet_service_1","map_wald_1","draw_component_1","geojson_layer_component_1","leaflet_map_component_1","legend_component_1","map_control_component_1","one_time_splash_component_1","vector_tile_layer_component_1","wms_layer_component_1","date_element_component_1","date_selection_component_1","map_coordinates_component_1","common_1","forms_1","http_1","ng_bootstrap_1"],"mappings":"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"}